
  {% extends "partials/base.html" %}
  
  {% block title %}Lab12 Home{% endblock %}
  
  {% block content %}

  <div class="container">
    <!-- Status Indicator (Moved below controls for better visibility) -->
    <div id="status-indicator" class="status-bar">
      <span class="status-dot" id="status-dot"></span>
      <span class="status" id="status-text">Ready</span>
    </div>

    <!-- Authentication Modal -->
    <div id="login-modal" class="login-page" style="display: none;">
      <div class="login-container">
        <span class="close-button" id="close-login-modal">&times;</span>
        <h2 id="login-title">Login</h2>
        <form id="login-form">
          <div class="input-group" id="fullname-group" style="display:none">
            <input id="login-fullname" name="full_name" type="text" placeholder="Full Name" autocomplete="name">
          </div>
          <div class="input-group">
            <input id="login-email" type="email" placeholder="Email" autocomplete="email" required>
          </div>
          <div class="input-group" id="password-group"> <input id="login-password" type="password" placeholder="Password"
              autocomplete="current-password" required>
          </div>
          <div class="input-group" id="confirm-group" style="display: none;">
            <input id="login-confirm" name="password_confirm" type="password" placeholder="Re-enter password"
              autocomplete="new-password">
          </div>
          <div class="input-group" id="pin-group" style="display: none;"> <input id="pin-code" type="text" name="pin"
              placeholder="6-digit code" autocomplete="one-time-code" pattern="\d{6}" maxlength="6">
          </div>

          <label id="show-password-label" style="font-size:14px; margin-bottom:15px; display:flex; align-items:center;">
            <input id="toggle-show-pwd" type="checkbox" style="margin-right:6px;">
            Show password
          </label>

          <p id="login-error" style="color:red;   height:1.2em;"></p>
          <p id="login-success" style="color:green; height:1.2em;"></p>
          <button type="submit" class="login-btn" id="login-submit">Log in</button>
          <p class="forgot-container">
            <a href="#" id="forgot-link">Forgot password?</a>
          </p>

          <div id="verify-actions" class="verify-actions"style="display: none; margin-top: 10px; font-size: 14px; text-align: center;">
            <a href="#" id="resend-link" style="margin-right: 15px;">Resend Code</a>
            <a href="#" id="cancel-link">Change Email</a>
          </div>

          <p id="login-toggle" class="signup-link">Create an account</p>
        </form>
      </div>
    </div>
      <div id="login-banner" class="login-banner hidden">
        ğŸ”’ Login required to generate notes.
      </div>
    <div class="controls">
   
      <button id="btn">ğŸ¤ Start Recording</button>
      <button id="pause-btn" class="hidden">â¸ï¸ Pause</button>
      <button id="sum" disabled>ğŸ“ Generate Notes</button>
      <!-- <button id="dl" class="hidden">â¬‡ï¸ Download PDF</button> -->
      <button id="save-gdrive-btn" class="hidden">ğŸ’¾ Save to Google Drive</button>
      <button id="clear-all-btn" class="secondary hidden">ğŸ—‘ï¸ Clear All</button> <!-- Initially hidden -->
      <button id="toggle-custom-instructions" class="secondary">âš™ï¸ Custom Note Instructions</button>
    </div>

    <div id="custom-instructions-section" class="hidden">
      <h4>Custom Note Instructions</h4>
      <textarea id="custom-instructions"
        placeholder="Enter simple instructions for the AI note-taker here. Example: Focus on action items and decisions made. OR Provide a very brief summary."></textarea>
    </div>

    <div class="section">
      <div class="section-title">
        <span>ğŸ”Š Live Transcript</span>
      </div>
      <div id="log" class="content-box" style="overflow-y: auto; max-height: 300px; scroll-behavior: smooth;"></div>
    </div>

    <div class="section">
      <div class="section-title">
        <span>ğŸ“œ Full Transcript</span>
        <span class="edit-cue">(Click to edit)</span>
      </div>
      <div id="full" class="content-box" contenteditable="true"></div>
    </div>

    <div id="notes-section" class="section hidden">
      <div class="section-title">
        <span>ğŸ“‹ Generated Notes</span>
        <div class="note-actions">
          <!-- <button id="toggle-preview" class="secondary hidden">Raw</button> -->
          <span id="quota-info" class="quota-info hidden"></span>
          <button id="copy-notes" class="secondary hidden">ğŸ“‹ Copy</button>
        </div>
      </div>
      <div id="notes" class="content-box"></div>
    </div>

    <!-- Feedback Form Modal (Initially hidden) -->
    <div id="feedback-modal" class="feedback-modal hidden">
      <div class="feedback-container">
        <span class="close-button" id="close-feedback-modal">&times;</span> <!-- Close button -->
        <h2>Feedback</h2>
        <form id="feedback-form">
          <textarea id="feedback-text" placeholder="Enter your feedback here..." required></textarea>
          <p id="feedback-msg"></p>
          <div class="feedback-buttons">
            <button type="submit" id="submit-feedback">Submit</button>
            <button type="button" id="cancel-feedback">Cancel</button>
          </div>
        </form>
      </div>
    </div>

  </div> <!-- End of .container -->
  {% endblock %}
